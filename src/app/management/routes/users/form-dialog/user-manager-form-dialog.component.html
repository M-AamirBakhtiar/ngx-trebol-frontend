<!--
 Copyright (c) 2020 Benjamin La Madrid

 This software is released under the MIT License.
 https://opensource.org/licenses/MIT
-->

<div>
  <h2 mat-dialog-title>Datos del Usuario</h2>
  <centered-mat-spinner *ngIf="saving$ | async">
  </centered-mat-spinner>

  <div [hidden]="saving$ | async">
    <form [formGroup]="formGroup" (submit)="onSubmit()">

      <mat-form-field>
        <input matInput placeholder="Nombre de Usuario" formControlName="name" />
      </mat-form-field>

      <mat-form-field>
        <input matInput placeholder="Clave de Usuario" formControlName="password" type="password" />
      </mat-form-field>

      <mat-form-field>
        <mat-select placeholder="Persona" formControlName="person">
          <mat-option *ngFor="let p of (people$ | async)"
            [value]="p.idCard">
            {{ p.name + " (" + p.idCard + ")" }}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field>
        <mat-select placeholder="Rol" formControlName="role">
          <mat-option *ngFor="let r of (roles$ | async)"
            [value]="r.name">
            {{ r.name }}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <div class="actions">
        <button mat-button mat-raised-button type="submit"
          color="primary"
          [disabled]="formGroup.invalid">
          Aceptar
        </button>
        <button mat-button mat-raised-button type="button"
          (click)="onCancel()">
          Cancelar
        </button>
      </div>
    </form>
  </div>
</div>
